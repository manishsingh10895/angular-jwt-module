var app=angular.module("angular-jwt",["ngStorage"]);app.config(function(t,e){t.interceptors.push(function(t,e){return{request:function(t){return t.headers=t.headers||{},e.token&&(t.headers.Authorization="Bearer "+e.token),t},responseError:function(e){return t.reject(e)}}})}),app.service("jwtAuthService",function(t,e,n){function i(t){var e=t.replace("-","+").replace("_","/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}return window.atob(e)}function o(t){var e=t.split(".");if(3!==e.length)throw new Error("Token is invalid, A valid token has three parts");var n=i(e[1]);if(!n)throw new Error("Token not decoded");return JSON.parse(n)}function r(){var t=e.token,n={};if("undefined"!=typeof t){var n=o(t);return n}}this.login=function(i,o,r){n.post(t.baseApiUrl+t.loginRoute,i).then(function(t){o?(e.token=t.data.token,o(t)):e.token=t.data.token},function(t){r&&r(t)})},this.getTokenClaims=function(){return r()},this.signup=function(i,o,r){n.post(t.baseApiUrl+t.signupRoute,i).then(function(t){o?(e.token=t.data.token,o(t)):e.token=t.data.token},function(t){r&&r(t)})},this.logout=function(t,n){e.token?(delete e.token,t("Logged Out")):n("No JWT Token was found")}}),app.provider("jwtAuth",function(){this.baseApiUrl="/api",this.loginRoute="/login",this.signupRoute="/signup",self=this,this.setBaseApiUrl=function(t){this.baseApiUrl=t},this.getProperty=function(t){return this[t]},this.initializeAuthService=function(t){self.baseApiUrl=t.baseApiUrl,self.signupRoute=t.signupRoute,self.loginRoute=t.loginRoute},this.$get=function(){return self}});